<h4>Posts</h4>

{% comment %}
Custom category sort order. Specify categories you want first (comma-separated).
Categories not listed will appear after in alphabetical order.
Example: "tech,personal,life"
{% endcomment %}
{% assign custom_category_order = "programming,ml,sanskruti" | split: "," %}

{% capture all_cats %}{% for cat in site.categories %}{{ cat[0] }},{% endfor %}{% endcapture %}
{% assign all_categories_sorted = all_cats | split: "," | sort %}
{% assign sorted_categories = "" | split: "," %}

{% for cat_name in custom_category_order %}
    {% if cat_name != "" %}
        {% assign sorted_categories = sorted_categories | push: cat_name %}
    {% endif %}
{% endfor %}

{% for cat_name in all_categories_sorted %}
    {% if cat_name != "" %}
        {% unless sorted_categories contains cat_name %}
            {% assign sorted_categories = sorted_categories | push: cat_name %}
        {% endunless %}
    {% endif %}
{% endfor %}

<div class="category-tabs">
    {% for cat_name in sorted_categories %}
        {% assign cat = site.categories[cat_name] %}
        {% if cat %}
        <div class="category-tab{% if forloop.first %} active{% endif %}" data-category="cat-{{ cat_name | slugify }}"># {{ cat_name }}</div>
        {% endif %}
    {% endfor %}
</div>

{% for cat_name in sorted_categories %}
    {% assign cat = site.categories[cat_name] %}
    {% if cat %}
    <div class="category-content{% if forloop.first %} active{% endif %}" id="cat-{{ cat_name | slugify }}">
        {% for post in cat %}
        <div>
            <a href="{{post.url | prepend: site.baseurl}}" class="posthead">
                {{post.title}}
            </a>
            <span class="postdate">{{post.date | slice: 0, 10}}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
{% endfor %}

<script>
    // Simple tab switcher
    document.addEventListener('DOMContentLoaded', function() {
        var tabs = document.querySelectorAll('.category-tab');
        var contents = document.querySelectorAll('.category-content');
        tabs.forEach(function(tab) {
            tab.addEventListener('click', function() {
                tabs.forEach(function(t) { t.classList.remove('active'); });
                contents.forEach(function(c) { c.classList.remove('active'); });
                tab.classList.add('active');
                var catId = tab.getAttribute('data-category');
                document.getElementById(catId).classList.add('active');
            });
        });
    });
</script>